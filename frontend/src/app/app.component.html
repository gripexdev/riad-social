<ng-container *ngIf="authService.isAuthenticated(); else publicShell">
  <div class="min-h-screen">
    <aside class="hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col lg:border-r lg:border-white/10 lg:bg-gradient-to-b lg:from-[#0f1114] lg:via-[#111418] lg:to-[#0b0d10]">
      <div class="flex h-full flex-col px-5 pb-6 pt-7 text-white">
        <a class="brand text-2xl text-white" routerLink="/home">Riad</a>
        <nav class="mt-10 flex-1 space-y-1 text-sm" aria-label="Primary">
          <a class="group flex items-center gap-3 rounded-2xl px-3 py-2 text-sm font-semibold text-white/70 transition hover:bg-white/10 hover:text-white" routerLink="/home" routerLinkActive="bg-white/10 text-white" [routerLinkActiveOptions]="{ exact: true }">
            <span class="material-icons text-[22px]">home</span>
            <span>Home</span>
          </a>
          <a class="group flex items-center gap-3 rounded-2xl px-3 py-2 text-sm font-semibold text-white/70 transition hover:bg-white/10 hover:text-white" routerLink="/search" routerLinkActive="bg-white/10 text-white">
            <span class="material-icons text-[22px]">search</span>
            <span>Search</span>
          </a>
          <button class="flex cursor-not-allowed items-center gap-3 rounded-2xl px-3 py-2 text-sm font-semibold text-white/40" type="button" disabled>
            <span class="material-icons text-[22px]">explore</span>
            <span>Explore</span>
          </button>
          <button class="flex cursor-not-allowed items-center gap-3 rounded-2xl px-3 py-2 text-sm font-semibold text-white/40" type="button" disabled>
            <span class="material-icons text-[22px]">smart_display</span>
            <span>Reels</span>
          </button>
          <button class="flex cursor-not-allowed items-center gap-3 rounded-2xl px-3 py-2 text-sm font-semibold text-white/40" type="button" disabled>
            <span class="material-icons text-[22px]">chat_bubble_outline</span>
            <span>Messages</span>
          </button>
          <button class="flex cursor-not-allowed items-center gap-3 rounded-2xl px-3 py-2 text-sm font-semibold text-white/40" type="button" disabled>
            <span class="material-icons text-[22px]">favorite_border</span>
            <span>Notifications</span>
          </button>
          <a class="group flex items-center gap-3 rounded-2xl px-3 py-2 text-sm font-semibold text-white/70 transition hover:bg-white/10 hover:text-white" routerLink="/create-post" routerLinkActive="bg-white/10 text-white">
            <span class="material-icons text-[22px]">add_box</span>
            <span>Create</span>
          </a>
          <ng-container *ngIf="authService.getUsername() as username; else profilePlaceholder">
            <a class="group flex items-center gap-3 rounded-2xl px-3 py-2 text-sm font-semibold text-white/70 transition hover:bg-white/10 hover:text-white" [routerLink]="['/users', username]" routerLinkActive="bg-white/10 text-white">
              <span class="material-icons text-[22px]">person</span>
              <span>Profile</span>
            </a>
          </ng-container>
          <ng-template #profilePlaceholder>
            <button class="flex cursor-not-allowed items-center gap-3 rounded-2xl px-3 py-2 text-sm font-semibold text-white/40" type="button" disabled>
              <span class="material-icons text-[22px]">person</span>
              <span>Profile</span>
            </button>
          </ng-template>
        </nav>
        <div class="mt-6 space-y-1 border-t border-white/10 pt-4">
          <button class="group flex w-full items-center gap-3 rounded-2xl px-3 py-2 text-sm font-semibold text-white/70 transition hover:bg-white/10 hover:text-white" type="button">
            <span class="material-icons text-[22px]">menu</span>
            <span>More</span>
          </button>
          <button class="group flex w-full items-center gap-3 rounded-2xl px-3 py-2 text-sm font-semibold text-white/70 transition hover:bg-white/10 hover:text-white" type="button" (click)="logout()">
            <span class="material-icons text-[22px]">logout</span>
            <span>Logout</span>
          </button>
        </div>
      </div>
    </aside>

    <div class="lg:pl-64">
      <header class="sticky top-0 z-40 border-b border-line bg-white/80 backdrop-blur lg:hidden">
        <div class="mx-auto flex w-full max-w-6xl items-center justify-between px-4 py-3">
          <a class="brand text-2xl text-ink" routerLink="/home">Riad</a>
          <nav class="flex items-center gap-2 text-muted" aria-label="Primary">
            <a class="rounded-full p-2 transition hover:bg-sand hover:text-ink" routerLink="/home">
              <span class="material-icons text-[20px]">home</span>
            </a>
            <a class="rounded-full p-2 transition hover:bg-sand hover:text-ink" routerLink="/search">
              <span class="material-icons text-[20px]">search</span>
            </a>
            <a class="rounded-full p-2 transition hover:bg-sand hover:text-ink" routerLink="/create-post">
              <span class="material-icons text-[20px]">add_box</span>
            </a>
            <button class="rounded-full p-2 transition hover:bg-sand hover:text-ink" type="button" (click)="logout()">
              <span class="material-icons text-[20px]">logout</span>
            </button>
          </nav>
        </div>
      </header>

      <main class="px-4 pb-16 pt-6">
        <router-outlet></router-outlet>
      </main>
    </div>
  </div>
</ng-container>

<ng-template #publicShell>
  <header class="sticky top-0 z-40 border-b border-line bg-white/80 backdrop-blur">
    <div class="mx-auto flex w-full max-w-6xl items-center justify-between px-4 py-3">
      <a class="brand text-3xl text-ink" routerLink="/login">Riad</a>
      <nav class="flex flex-wrap items-center gap-2 text-xs font-semibold sm:text-sm">
        <a class="rounded-full px-4 py-2 text-muted transition hover:bg-sand hover:text-ink" routerLink="/login">Login</a>
        <a class="rounded-full px-4 py-2 text-muted transition hover:bg-sand hover:text-ink" routerLink="/register">Register</a>
      </nav>
    </div>
  </header>

  <main class="px-4 pb-16 pt-6">
    <router-outlet></router-outlet>
  </main>
</ng-template>
